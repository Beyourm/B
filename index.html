<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>لوحة تحكم المسوِّق - نسخة مطورة</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="../assets/fonts/tajawal.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
    --primary-color: #0d3b14;
    --secondary-color: #e5a72d;
    --accent-color: #f7f3e9;
    --text-color-dark: #2d3748;
    --white-color: #ffffff;
    --muted-color: #4a5568;
    --danger-color: #dc3545;
    --success-color: #28a745;
    --bg-dark: #1a1a1a;
    --text-light: #f1f1f1;
}

body {
    font-family:"Tajawal",sans-serif;
    background: linear-gradient(120deg,var(--accent-color),#eaf0f5);
    margin:0; padding:0;
    display:flex; justify-content:center;
    min-height:100vh; color:var(--text-color-dark);
}

.dashboard-container {
    width:100%; max-width:1000px; margin-top:30px;
    background:var(--white-color);
    border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.1);
    overflow:hidden;
    transition: all 0.3s;
}

/* Dark Mode */
body.dark-mode {
    background:#121212;
    color: var(--text-light);
}
body.dark-mode .dashboard-container { background: #1e1e1e; }
body.dark-mode .stats-card { background:#2a2a2a; color:#f1f1f1; }
body.dark-mode .referral-link-box { background:#2a2a2a; border-color:#444; color:#f1f1f1; }
body.dark-mode .courses-btn { background: linear-gradient(135deg,#f0b940,#e5a72d); color:#121212; }

/* Header */
header {
    background: var(--primary-color); color:#fff;
    text-align:center; padding:25px; position:relative;
}
header h1 { margin:0; font-size:24px; font-weight:800; }
header p { margin-top:5px; font-size:16px; }
header .courses-btn {
    margin-top:15px;
    background: linear-gradient(135deg,var(--secondary-color),#f0b940);
    color: var(--primary-color);
    padding:12px 25px; font-size:17px; font-weight:800;
    border:none; border-radius:12px; cursor:pointer;
    display:inline-flex; align-items:center; transition: all 0.3s;
}
header .courses-btn:hover { transform:translateY(-2px); background:linear-gradient(135deg,#f0b940,#ffd55b); }
header .courses-btn i { margin-left:10px; transition: transform 0.3s; }
header .courses-btn:hover i { transform: rotate(-10deg) scale(1.1); }

/* Content */
.content { padding:30px; }

/* Stats Grid */
.stats-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-bottom:25px; }
.stats-card {
    background:var(--accent-color); padding:20px; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.05);
    text-align:center; transition:all 0.3s;
}
.stats-card:hover { transform:translateY(-3px); box-shadow:0 6px 15px rgba(0,0,0,0.1); }
.stats-card h2 { font-size:16px; font-weight:700; margin-top:0; color:var(--primary-color); }
.stats-count { font-size:40px; font-weight:900; color:var(--secondary-color); margin-top:5px; display:block; }

/* Referral link */
.referral-link-box { display:flex; justify-content:space-between; align-items:center; padding:15px; border:1px dashed var(--primary-color); border-radius:10px; cursor:pointer; margin-top:10px; }
.copy-btn { background:var(--primary-color); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; transition:background 0.2s; }
.copy-btn:hover { background:#1a5c24; }

/* Toast */
.toast-notification {
    position: fixed; top:20px; right:20px;
    background:var(--primary-color); color:white;
    padding:10px 20px; border-radius:8px;
    opacity:0; transition:opacity 0.3s;
    display:flex; align-items:center; box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
.toast-notification.show { opacity:1; }

/* Skeleton Loader */
.skeleton-card {
    height:80px; background:#eee; border-radius:12px;
    margin-bottom:15px; position:relative; overflow:hidden;
}
.skeleton-card::after {
    content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
    background: linear-gradient(90deg,#eee,#f5f5f5,#eee);
    animation: loading 1.5s infinite;
}
@keyframes loading { 0% { left:-100%; } 50%{ left:100%; } 100%{ left:100%; } }

</style>
</head>
<body>

<div class="dashboard-container">
    <header>
        <h1>لوحة تحكم المسوِّق</h1>
        <p id="marketer-id-display">الرجاء إدخال المعرّف في الرابط</p>
        <button class="courses-btn" onclick="openCoursesDialog()">
            <i class="fas fa-graduation-cap"></i> اكتشف دوراتنا الآن
        </button>
        <button onclick="toggleDarkMode()" style="position:absolute; top:10px; left:10px;">🌙/☀️</button>
    </header>

    <div class="content">
        <!-- Skeleton Loader -->
        <div id="skeletonLoader">
            <div class="skeleton-card"></div>
            <div class="skeleton-card"></div>
            <div class="skeleton-card"></div>
        </div>

        <!-- Dashboard Content -->
        <div id="dashboardContent" style="display:none;">
            <div class="stats-grid">
                <div class="stats-card">
                    <h2><i class="fas fa-users card-title-icon"></i> إجمالي عدد المسجّلين</h2>
                    <span class="stats-count" id="referrals-count">0</span>
                </div>
                <div class="stats-card">
                    <h2><i class="fas fa-check-circle card-title-icon"></i> المسجّلون النشطون</h2>
                    <span class="stats-count" id="active-referrals-count">0</span>
                </div>
            </div>
            <!-- Chart -->
            <canvas id="referralChart" height="150"></canvas>
        </div>
    </div>
</div>

<div id="toastNotification" class="toast-notification">
    <i class="fas fa-check-circle"></i> تم نسخ الرابط إلى الحافظة!
</div>

<script>
// Dark Mode Toggle
function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

// Simulate Data Load
setTimeout(() => {
    document.getElementById('skeletonLoader').style.display = 'none';
    document.getElementById('dashboardContent').style.display = 'block';

    // Example Chart
    const ctx = document.getElementById('referralChart').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['نشط Y','غير نشط N'],
            datasets:[{
                data:[12,8],
                backgroundColor:['#28a745','#dc3545']
            }]
        },
        options:{
            plugins:{ legend:{ position:'bottom', labels:{color:'#0d3b14'} } }
        }
    });

}, 1500);

// Open Courses Modal
function openCoursesDialog() {
    alert('هنا يمكنك فتح صفحة الدورات (Modal)');
}

</script>
<script src="marketer_tracker.js"></script> 
<script src="table-logic.js"></script> 
<script src="dashboard.js"></script> 
</body>
</html>
